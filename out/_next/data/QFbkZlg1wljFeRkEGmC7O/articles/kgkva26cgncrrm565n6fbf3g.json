{"pageProps":{"article":{"id":269,"documentId":"kgkva26cgncrrm565n6fbf3g","title":"Dockerで簡単構築！Ollamaを使ってLLMを試そう","content":"最近話題の大規模言語モデル（LLM）を自分の環境で手軽に試したいと思いませんか？\n\nこの記事では、Dockerを使って **ollama** を動かす方法を解説します。\n\n特に、CPU環境でサクッとセットアップできるので、LLM初心者やハードウェアリソースが限られている方にもおすすめです。\n\n---\n\n# 1. Ollamaを動かすための準備\n\nまずは必要なファイルを作成します。\n\n## Docker Composeファイルの作成\n\n以下の内容で `docker-compose.yml` を作成します。これにより、ollamaをDockerコンテナとして動かす設定が整います。\n\n```yaml\nservices:\n  ollama:\n    image: ollama/ollama\n    container_name: ollama\n    ports:\n      - \"11434:11434\"\n    volumes:\n      - ollama:/root/.ollama\n\nvolumes:\n  ollama:\n\n```\n\n## コンテナの起動\n\n次に、以下のコマンドを実行してコンテナを起動します。\n\n```bash\ndocker compose up -d\n```\n\nこれで、ollamaが立ち上がります。特にエラーが出なければ、次に進みましょう。\n\n---\n\n# 2. tinyllamaモデルを試す\n\n起動したコンテナ内でtinyllamaモデルを利用できるように設定します。\n\n## モデルをPullする\n\n以下のコマンドで、tinyllamaモデルを取得します。\n\n```bash\ndocker exec -it ollama ollama run tinyllama\n```\n\n取得したモデルはコンテナ内の `/root/.ollama` に保存されます。\n\n---\n\n# 3. モデルに質問してみる\n\ntinyllamaを使って質問してみましょう。以下のコマンドを実行します。\n\n## 質問コマンド例\n\n```bash\ncurl http://localhost:11434/api/generate -d '{\n  \"model\": \"tinyllama\",\n  \"prompt\": \"Why is the sky blue?\",\n  \"stream\": false\n}'\n```\n\n## サンプルレスポンス\n\n以下のようなレスポンスが返ってきます。\n\n```json\n{\n  \"model\": \"tinyllama\",\n  \"response\": \"The sky blue color that we see in the sky is due to the presence of sunlight reflected by the Earth's surface. ...\",\n  \"done\": true\n}\n```\n\nシンプルな設定でLLMを利用できましたね！\n\n---\n\n# 4. Pythonからもっと便利に使う\n\nCLIだけでなく、Pythonスクリプトからもollamaを使うことができます。\n\n## Pythonスクリプトの作成\n\n以下のコードを `ollama.py` というファイル名で保存してください。\n\n```python\nimport requests\n\n# Ollamaのエンドポイント\nurl = \"http://localhost:11434/api/generate\"\n\n# モデル名を指定\nmodel_name = \"tinyllama\"\n\n# プロンプト\nprompt = \"tell me about popular place in san diego.\"\n\n# リクエストのペイロード\npayload = {\n    \"model\": model_name,\n    \"prompt\": prompt,\n    \"stream\": False\n}\n\n# リクエストの送信\nresponse = requests.post(url, json=payload)\n\n# レスポンスの確認\nif response.status_code == 200:\n    print(\"Response:\", response.json()[\"response\"])\nelse:\n    print(\"Error:\", response.status_code, response.text)\n\n```\n\n## スクリプトを実行\n\n以下のコマンドでスクリプトを実行します。\n\n```bash\npython3 ollama.py\n```\n\n## 実行結果\n\n例えば、以下のような回答が返ってきます。\n\n```\nResponse: San Diego is a popular tourist destination known for its beautiful beaches, rich history, world-class restaurants and attractions such as the San Diego Zoo, SeaWorld, Balboa Park, La Jolla Cove, Mission Valley Farmers Market, and more. Some of the most popular places to visit in San Diego include:\n\n1) Balboa Park - home to numerous museums, gardens, and cultural attractions, such as the San Diego Museum of Art, California Museum of Photography, and the Mexican Heritage Plaza.\n\n2) San Diego Zoo - one of the largest zoo complexes in the world, featuring over 3,000 animals from more than 800 species.\n\n3) La Jolla Cove - a scenic spot located at the foot of Mount Soledad where visitors can observe sea lions, seals, and otters playfully swimming in the crystal-clear waters.\n\n4) Mission Valley Farmers Market - an outdoor market featuring fresh produce, locally grown foods, and unique artisanal goods.\n\n5) Coronado Island - a picturesque seaside village known for its charming streets lined with historic mansions, beautiful beaches, and a range of dining options.\n\n6) USS Midway Museum - a restored World War II aircraft carrier that offers interactive exhibits, live-aboard tours, and memorabilia displays.\n\n7) La Jolla Botanical Cactus Garden - an extensive collection of cacti and succulents, featuring native species from all over the world.\n\n8) Torrey Pines State Natural Reserve - a scenic coastal reserve with hiking trails, picnic areas, and stunning views of the Pacific Ocean.\n\n9) Balboa Park Golf Course - a 13-hole golf course located in San Diego's Balboa Park that offers beautiful views of the city skyline.\n\n10) Pacific Beach - a popular surfing spot known for its long beaches and stunning views of La Jolla Cove.\n\nThese are just a few examples of the many attractions and activities available in San Diego, but there's always something new to discover at any time!\n```\n\n旅行のアドバイスから、技術的な質問まで、あらゆるプロンプトに答えてくれます！\n\n---\n\n## 注意事項\n\nLLMが生成する回答は便利な一方で、必ずしも正確であるとは限りません。回答内容に誤りが含まれている場合や、曖昧な表現が使われていることがあります。そのため、重要な決定や判断を行う際には、他の信頼できる情報源と照らし合わせて確認してください。\n\n---\n\n## おわりに\n\nDockerを使えば、ollamaのセットアップはとても簡単です。tinyllamaモデルを使った質問やPythonスクリプトによる応用など、ローカル環境でLLMを自由に試せるのは魅力的ですよね。次は、さらに高度なモデルを試してみるのも良いかもしれません。\n\nぜひこの記事を参考に、LLMの世界を体験してみてください！\n\n---\n\n","createdAt":"2025-05-19T08:50:58.302Z","updatedAt":"2025-06-06T00:01:09.822Z","publishedAt":"2025-06-06T00:01:09.838Z","docId":"b8ho0mhr2fggbjzykxhy7cmz","tags":[{"id":20,"documentId":"fbllyhmskvu2l7wbg5dzpkri","createdAt":"2025-05-19T09:48:50.341Z","updatedAt":"2025-05-19T09:48:50.341Z","publishedAt":"2025-05-19T09:48:50.348Z","name":"LLM"},{"id":22,"documentId":"enpfq0z697dadtxijwpwwrsv","createdAt":"2025-05-19T09:49:17.862Z","updatedAt":"2025-05-19T09:49:17.862Z","publishedAt":"2025-05-19T09:49:17.870Z","name":"Python"},{"id":30,"documentId":"d99cu6c3t9hgwynppb92lhph","createdAt":"2025-05-19T09:50:59.080Z","updatedAt":"2025-05-19T09:50:59.080Z","publishedAt":"2025-05-19T09:50:59.086Z","name":"生成AI"}],"thumbnail":[{"id":25,"documentId":"srxbmw4kyx2j920uv62we9ar","name":"20250513-21.png","alternativeText":null,"caption":null,"width":1503,"height":844,"formats":{"thumbnail":{"name":"thumbnail_20250513-21.png","hash":"thumbnail_20250513_21_37f2d57d1a","ext":".png","mime":"image/png","path":null,"width":245,"height":138,"size":13.65,"sizeInBytes":13645,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/thumbnail_20250513_21_37f2d57d1a.png"},"medium":{"name":"medium_20250513-21.png","hash":"medium_20250513_21_37f2d57d1a","ext":".png","mime":"image/png","path":null,"width":750,"height":421,"size":54.48,"sizeInBytes":54479,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/medium_20250513_21_37f2d57d1a.png"},"small":{"name":"small_20250513-21.png","hash":"small_20250513_21_37f2d57d1a","ext":".png","mime":"image/png","path":null,"width":500,"height":281,"size":33.6,"sizeInBytes":33597,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/small_20250513_21_37f2d57d1a.png"},"large":{"name":"large_20250513-21.png","hash":"large_20250513_21_37f2d57d1a","ext":".png","mime":"image/png","path":null,"width":1000,"height":562,"size":76.8,"sizeInBytes":76802,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/large_20250513_21_37f2d57d1a.png"}},"hash":"20250513_21_37f2d57d1a","ext":".png","mime":"image/png","size":21.58,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/20250513_21_37f2d57d1a.png","previewUrl":null,"provider":"@strapi/provider-upload-aws-s3","provider_metadata":null,"createdAt":"2025-05-20T07:52:51.916Z","updatedAt":"2025-05-20T07:52:51.916Z","publishedAt":"2025-05-20T07:52:51.917Z"}]}},"__N_SSG":true}