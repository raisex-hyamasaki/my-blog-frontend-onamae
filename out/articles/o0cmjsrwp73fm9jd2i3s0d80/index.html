<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="æœ€æ–°ã®æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã€ãƒ„ãƒ¼ãƒ«ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ç­‰ã«ã¤ã„ã¦ã®è€ƒå¯Ÿã‚’ãŠå±Šã‘"/><meta property="og:url" content="https://blog.raisex.jp/articles/o0cmjsrwp73fm9jd2i3s0d80"/><meta property="og:title" content="DynamoDBã‹ã‚‰ã®å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã«ãŠã‘ã‚‹ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ | ãƒ¬ã‚¤ã‚ºã‚¯ãƒ­ã‚¹TechBlog"/><meta property="og:description" content="æœ€æ–°ã®æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã€ãƒ„ãƒ¼ãƒ«ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ç­‰ã«ã¤ã„ã¦ã®è€ƒå¯Ÿã‚’ãŠå±Šã‘"/><meta property="og:image" content="https://blog.raisex.jphttps://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/medium_20250513_10_4b5734cef6.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><title>DynamoDBã‹ã‚‰ã®å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã«ãŠã‘ã‚‹ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹<!-- --> | ãƒ¬ã‚¤ã‚ºã‚¯ãƒ­ã‚¹ Tech Blog</title><meta name="next-head-count" content="11"/><link rel="preload" href="/_next/static/css/7d757bdfdfb985a7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7d757bdfdfb985a7.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-2c547fd4592db0a6.js" defer=""></script><script src="/_next/static/chunks/framework-e952fed463eb8e34.js" defer=""></script><script src="/_next/static/chunks/main-72cf801a60c05482.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b6737859a806843a.js" defer=""></script><script src="/_next/static/chunks/a2bf56a3-f921f321ae1e0e8d.js" defer=""></script><script src="/_next/static/chunks/61-43a5fb199f2ef164.js" defer=""></script><script src="/_next/static/chunks/257-c12ad0b16790f4c5.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5Bid%5D-1f9ae5c384ab52dd.js" defer=""></script><script src="/_next/static/wdcbjCbp8DYGqTQVAi4UF/_buildManifest.js" defer=""></script><script src="/_next/static/wdcbjCbp8DYGqTQVAi4UF/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="max-w-[1024px] mx-auto px-4"><header class="sticky top-0 z-20 bg-white border-b border-gray-200 h-12 flex items-center justify-between px-4"><a class="text-blue-600 no-underline hover:text-gray-600 text-lg font-bold" href="/">ğŸ“‹ ãƒ¬ã‚¤ã‚ºã‚¯ãƒ­ã‚¹ Tech Blog</a><div class="flex gap-3"><a href="https://twitter.com/share" target="_blank" rel="noopener noreferrer"><img src="/icons/x.svg" alt="Share on X" class="h-7 w-7"/></a><a href="https://www.facebook.com/sharer/sharer.php" target="_blank" rel="noopener noreferrer"><img src="/icons/facebook.svg" alt="Share on Facebook" class="h-7 w-7"/></a><a href="https://social-plugins.line.me/lineit/share" target="_blank" rel="noopener noreferrer"><img src="/icons/line.svg" alt="Share on LINE" class="h-7 w-7"/></a></div></header><article class="prose prose-slate max-w-none pt-6"><h1 class="text-3xl font-bold border-b pb-2">DynamoDBã‹ã‚‰ã®å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã«ãŠã‘ã‚‹ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h1><div class="text-sm text-gray-500 mb-4">æŠ•ç¨¿æ›´æ–°æ—¥: <!-- -->2025/6/6 8:54:33</div><div class="flex flex-wrap gap-2 mb-4"><span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full">#<!-- -->AWS</span><span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full">#<!-- -->Backend</span></div><div class="w-full flex justify-center mb-6"><img src="https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/medium_20250513_10_4b5734cef6.png" alt="ã‚µãƒ ãƒã‚¤ãƒ«" class="w-full max-w-[800px] h-auto rounded"/></div><p>å¼Šç¤¾ã¯ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®é–‹ç™ºã‚’å¾—æ„ã¨ã—ã¦ãŠã‚Šã€Amazon DynamoDBã‚„AWS Lambdaç­‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ãŸåŠ¹ç‡çš„ã§ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
<p>ãã®ä¸­ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã„ã¦ã€Œç”»é¢ã«å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹ã€ã¨ã„ã†ä»•æ§˜ã¯ã‚ˆãè¦‹ã‚‰ã‚Œã‚‹ã‚‚ã®ã®ã€NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã¯é©åˆ‡ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é¸ã°ãªã„ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚„ã‚³ã‚¹ãƒˆã®èª²é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚</p>
<p>æœ¬è¨˜äº‹ã§ã¯ã€DynamoDBã‹ã‚‰å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã¨ã€ãã®å®Ÿé¨“çµæœã‚’ã‚‚ã¨ã«ã—ãŸè¨­è¨ˆä¸Šã®æ³¨æ„ç‚¹ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚</p>
<hr/>
<h1><strong>å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã®èª²é¡Œ</strong></h1>
<p>DynamoDBã¯ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã«å„ªã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ãŒã€è¨­è¨ˆæ¬¡ç¬¬ã§å‡¦ç†æ€§èƒ½ãŒå¤§ããå¤‰åŒ–ã—ã¾ã™ã€‚</p>
<p>ç‰¹ã«ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™:</p>
<ul>
<li><strong>Scanã®ãƒªã‚¹ã‚¯</strong>:
Scanã¯ãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ã‚’ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹ãŸã‚ã€è†¨å¤§ãªãƒ‡ãƒ¼ã‚¿é‡ã®å ´åˆã«æ™‚é–“ãŒã‹ã‹ã‚Šã€ã‚³ã‚¹ãƒˆã‚‚å¢—åŠ ã—ã¾ã™ã€‚</li>
<li><strong>Queryã®å¯èƒ½æ€§</strong>:
é©åˆ‡ã«è¨­è¨ˆã•ã‚ŒãŸãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ã¨ã‚½ãƒ¼ãƒˆã‚­ãƒ¼ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’åŠ¹ç‡çš„ã«å–å¾—ã§ãã¾ã™ã€‚</li>
</ul>
<hr/>
<h1><strong>å®Ÿé¨“æ¦‚è¦</strong></h1>
<p>DynamoDBã§3ä¸‡ä»¶ã€10ä¸‡ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã—ã€Scanã¨Queryã®å‡¦ç†æ™‚é–“ã‚’æ¯”è¼ƒã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã®2ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚</p>
<ol>
<li><strong>å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å˜ä¸€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ã¾ã¨ã‚ã‚‹</strong></li>
<li><strong>ãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«åˆ†æ•£ã•ã›ã‚‹</strong></li>
</ol>
<p>ãƒ‡ãƒ¼ã‚¿ã¯AWSå…¬å¼ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒª <a href="https://github.com/aws-samples/csv-to-dynamodb" target="_blank" rel="noopener noreferrer" class="text-blue-600 underline">aws-samples/csv-to-dynamodb</a> ã®testfile.csvã‚’ä½¿ç”¨ã€‚</p>
<p>å®Ÿé¨“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã”ã¨ã«å°‘ã—ãƒ‡ãƒ¼ã‚¿ã‚’ä¿®æ­£ã—ã€æŠ•å…¥ã—ã¾ã™ã€‚</p>
<hr/>
<h2><strong>å®Ÿé¨“1: å˜ä¸€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ã¾ã¨ã‚ã‚‹</strong></h2>
<h3><strong>æ‰‹æ³•</strong></h3>
<ul>
<li><strong>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼</strong>: å›ºå®šå€¤ï¼ˆä¾‹: <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">DATA</code>ï¼‰ã‚’è¨­å®šã™ã‚‹GSIã‚’ä½œæˆã€‚</li>
<li><strong>ç›®çš„</strong>: å˜ä¸€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ã€Queryã§åŠ¹ç‡çš„ã«å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã€‚</li>
</ul>
<p><strong>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä¾‹:</strong></p>























<table class="border border-gray-400 w-full text-sm my-4 whitespace-pre-wrap table-fixed"><thead class="bg-cyan-100 text-black"><tr><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">DataType (PK)</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">uuid</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">Country</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">ItemType</th></tr></thead><tbody><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">DATA</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">535113847</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Azerbaijan</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Snacks</td></tr><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">DATA</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">874708545</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Panama</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Cosmetics</td></tr></tbody></table>
<p>Queryã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(AWS Lambdaç”¨)</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-python" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(286, 60%, 67%)">import</span><span> boto3
</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">from</span><span> boto3</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>dynamodb</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>conditions </span><span class="token" style="color:hsl(286, 60%, 67%)">import</span><span> Key
</span>
<span></span><span class="token" style="color:hsl(286, 60%, 67%)">def</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">lambda_handler</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>event</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> context</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>    table_name </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;test_datas&#x27;</span><span>
</span><span>    region </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;us-east-1&#x27;</span><span>
</span><span>    gsi_name </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;DataType-index&#x27;</span><span>
</span>
<span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># DynamoDBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–</span><span>
</span><span>    dynamodb </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> boto3</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>resource</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;dynamodb&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> region_name</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span>region</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>    table </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> dynamodb</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>Table</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>table_name</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>
<span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># ã‚¯ã‚¨ãƒªæ¡ä»¶ DataType ãŒ DATA</span><span>
</span><span>    key_condition_expression </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> Key</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;DataType&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>eq</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;DATA&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>
<span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">try</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>        options </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;IndexName&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> gsi_name</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;KeyConditionExpression&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> key_condition_expression</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ReturnConsumedCapacity&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;TOTAL&#x27;</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">while</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">True</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>            response </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> table</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>query</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(207, 82%, 66%)">**</span><span>options</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>            next_token </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> response</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>get</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;LastEvaluatedKey&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">None</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>next_token</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>
<span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> next_token</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>                options</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ExclusiveStartKey&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> next_token
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">else</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>                </span><span class="token" style="color:hsl(286, 60%, 67%)">break</span><span>
</span>
<span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;statusCode&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">200</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">except</span><span> Exception </span><span class="token" style="color:hsl(286, 60%, 67%)">as</span><span> e</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ã‚¨ãƒ©ãƒ¼:&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> e</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;statusCode&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">500</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;body&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ&#x27;</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></code></pre></div></pre>
<p>Scanã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(AWS Lambdaç”¨)</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-python" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(286, 60%, 67%)">import</span><span> boto3
</span>
<span></span><span class="token" style="color:hsl(286, 60%, 67%)">def</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">lambda_handler</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>event</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> context</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>    table_name </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;test_datas_&#x27;</span><span>
</span><span>    region </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;us-east-1&#x27;</span><span>
</span>
<span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># DynamoDBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–</span><span>
</span><span>    dynamodb </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> boto3</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>resource</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;dynamodb&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> region_name</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span>region</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>    table </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> dynamodb</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>Table</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>table_name</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>
<span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">try</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>        options </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ReturnConsumedCapacity&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;TOTAL&#x27;</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">while</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">True</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>            response </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> table</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>scan</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(207, 82%, 66%)">**</span><span>options</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>            next_token </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> response</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>get</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;LastEvaluatedKey&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">None</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>next_token</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>
<span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> next_token</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>                options</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ExclusiveStartKey&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> next_token
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">else</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>                </span><span class="token" style="color:hsl(286, 60%, 67%)">break</span><span>
</span>
<span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;statusCode&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">200</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">except</span><span> Exception </span><span class="token" style="color:hsl(286, 60%, 67%)">as</span><span> e</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ã‚¨ãƒ©ãƒ¼:&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> e</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;statusCode&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">500</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;body&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ&#x27;</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></code></pre></div></pre>
<h3><strong>çµæœ(Lambdaã®ã‚¦ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ)</strong></h3>



































<table class="border border-gray-400 w-full text-sm my-4 whitespace-pre-wrap table-fixed"><thead class="bg-cyan-100 text-black"><tr><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">ãƒ‡ãƒ¼ã‚¿é‡</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">ãƒ¡ãƒ¢ãƒª (MB)</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">Query (ç§’)</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">Scan (ç§’)</th></tr></thead><tbody><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">3ä¸‡ä»¶</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">512</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">15</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">15</td></tr><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap"></td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">2048</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">4</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">5</td></tr><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">10ä¸‡ä»¶</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">512</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">50</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">50</td></tr><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap"></td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">2048</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">13</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">15</td></tr></tbody></table>
<h3><strong>è€ƒå¯Ÿ</strong></h3>
<ul>
<li>å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ã„ã†è¦³ç‚¹ã§ã¯Scanã‚‚Queryã‚‚ã‚ã¾ã‚Šå‡¦ç†æ™‚é–“ã®é•ã„ã¯ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</li>
<li>ãƒ‡ãƒ¼ã‚¿é‡ãŒå¢—ãˆã‚‹ã¨å–å¾—æ™‚é–“ãŒæ•°åç§’ã‹ã‹ã‚‹ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ‚ªåŒ–ãŒæ‡¸å¿µã•ã‚Œã¾ã™ã€‚</li>
<li>ãƒ¡ãƒ¢ãƒªã‚’å¢—ã‚„ã™ã“ã¨ã§å‡¦ç†æ™‚é–“ãŒçŸ­ç¸®ã•ã‚Œã¾ã™ãŒã€ãã‚Œã§ã‚‚æ•°ä¸‡ä»¶ä»¥ä¸Šã§ã¯éåŒæœŸå‡¦ç†ã‚„åˆ¥ã®å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚</li>
</ul>
<hr/>
<h2><strong>å®Ÿé¨“2: ãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«åˆ†æ•£ã™ã‚‹</strong></h2>
<h3><strong>æ‰‹æ³•</strong></h3>
<ul>
<li><strong>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼</strong>: ã‚·ãƒ£ãƒ¼ãƒ‰ç•ªå·ã‚„ãƒ©ãƒ³ãƒ€ãƒ è­˜åˆ¥å­ã‚’ä»˜åŠ ã€‚</li>
<li><strong>ç›®çš„</strong>: ãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«åˆ†æ•£ã—ã€ä¸¦åˆ—å‡¦ç†ã§å–å¾—é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚</li>
</ul>
<p><strong>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä¾‹:</strong></p>


























<table class="border border-gray-400 w-full text-sm my-4 whitespace-pre-wrap table-fixed"><thead class="bg-cyan-100 text-black"><tr><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">ItemCategory (PK)</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">uuid</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">DataType</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">Country</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">ItemType</th></tr></thead><tbody><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">ItemCategory#11</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">535113847</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">DATA</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Azerbaijan</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Snacks</td></tr><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">ItemCategory#5</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">874708545</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">DATA</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Panama</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Cosmetics</td></tr></tbody></table>
<p>ä¸¦åˆ—ã§ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(AWS Lambdaç”¨)</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-python" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(286, 60%, 67%)">import</span><span> boto3
</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">import</span><span> os
</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">from</span><span> botocore</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>config </span><span class="token" style="color:hsl(286, 60%, 67%)">import</span><span> Config
</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">from</span><span> concurrent</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>futures </span><span class="token" style="color:hsl(286, 60%, 67%)">import</span><span> ThreadPoolExecutor</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> as_completed
</span>
<span></span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># DynamoDB ãƒ†ãƒ¼ãƒ–ãƒ«å</span><span>
</span><span>TABLE_NAME </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;test_datas&quot;</span><span>
</span><span>SHARD_COUNT </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">12</span><span>  </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># ã‚·ãƒ£ãƒ¼ãƒ‰ã®æ•°</span><span>
</span>
<span>custom_config </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> Config</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>
</span><span>    max_pool_connections</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span class="token" style="color:hsl(29, 54%, 61%)">12</span><span>
</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span></span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># DynamoDB ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä½œæˆ</span><span>
</span><span>dynamodb </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> boto3</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>client</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;dynamodb&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> config</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span>custom_config</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>
<span></span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># æœ€å¤§ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°</span><span>
</span><span>max_workers </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">min</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(29, 54%, 61%)">32</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> os</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>cpu_count</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">*</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">5</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>
<span></span><span class="token" style="color:hsl(286, 60%, 67%)">def</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">query_shard</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>partition_key</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>    </span><span class="token triple-quoted-string" style="color:hsl(95, 38%, 62%)">&quot;&quot;&quot;æŒ‡å®šã•ã‚ŒãŸã‚·ãƒ£ãƒ¼ãƒ‰ã‚’ã‚¯ã‚¨ãƒªã™ã‚‹é–¢æ•°&quot;&quot;&quot;</span><span>
</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">try</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>        items </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span>
</span><span>        options </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;TableName&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> TABLE_NAME</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;IndexName&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ItemCategory-index&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;KeyConditionExpression&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;ItemCategory = :pk&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ExpressionAttributeValues&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;:pk&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;S&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> partition_key</span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">while</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">True</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>            response </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> dynamodb</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>query</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(207, 82%, 66%)">**</span><span>options</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>            items</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>extend</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>response</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>get</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Items&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>            next_token </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> response</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>get</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;LastEvaluatedKey&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">None</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> next_token</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>                options</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;ExclusiveStartKey&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> next_token
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">else</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>                </span><span class="token" style="color:hsl(286, 60%, 67%)">break</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">f&quot;</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">partition_key</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">: </span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation" style="color:hsl(95, 38%, 62%)">len</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string-interpolation interpolation">items</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">)</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">ä»¶&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> items
</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">except</span><span> Exception </span><span class="token" style="color:hsl(286, 60%, 67%)">as</span><span> e</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">f&quot;Error querying </span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">partition_key</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">: </span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">e</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span>
</span>
<span></span><span class="token" style="color:hsl(286, 60%, 67%)">def</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">query_all_shards</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>    </span><span class="token triple-quoted-string" style="color:hsl(95, 38%, 62%)">&quot;&quot;&quot;ã™ã¹ã¦ã®ã‚·ãƒ£ãƒ¼ãƒ‰ã‚’ä¸¦åˆ—ã§ã‚¯ã‚¨ãƒªã™ã‚‹&quot;&quot;&quot;</span><span>
</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">f&#x27;max_workers: </span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">max_workers</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">with</span><span> ThreadPoolExecutor</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>max_workers</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span>max_workers</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">as</span><span> executor</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># ã‚·ãƒ£ãƒ¼ãƒ‰ã”ã¨ã«ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œ</span><span>
</span><span>        futures </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>            executor</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>submit</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>query_shard</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">f&quot;ItemCategory#</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">shard_number</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> shard_number
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">for</span><span> shard_number </span><span class="token" style="color:hsl(286, 60%, 67%)">in</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">range</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> SHARD_COUNT </span><span class="token" style="color:hsl(207, 82%, 66%)">+</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span>        
<span>        </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># çµæœã‚’é›†ç´„</span><span>
</span><span>        results </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span>
</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">for</span><span> future </span><span class="token" style="color:hsl(286, 60%, 67%)">in</span><span> as_completed</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>futures</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">try</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>                shard_result </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> future</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>result</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>                results</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>extend</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>shard_result</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>            </span><span class="token" style="color:hsl(286, 60%, 67%)">except</span><span> Exception </span><span class="token" style="color:hsl(286, 60%, 67%)">as</span><span> e</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>                </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">f&quot;Error in shard </span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">futures</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">[</span><span class="token string-interpolation interpolation">future</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">]</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">: </span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">e</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>        
<span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> results
</span>
<span></span><span class="token" style="color:hsl(286, 60%, 67%)">def</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">lambda_handler</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>event</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> context</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>    </span><span class="token triple-quoted-string" style="color:hsl(95, 38%, 62%)">&quot;&quot;&quot;Lambda é–¢æ•°ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ&quot;&quot;&quot;</span><span>
</span><span>    results </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> query_all_shards</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">print</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">f&#x27;</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation" style="color:hsl(95, 38%, 62%)">len</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string-interpolation interpolation">results</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">)</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">ä»¶&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>        </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;statusCode&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">200</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>        </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;body&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></code></pre></div></pre>
<h3><strong>çµæœ(Lambdaã®ã‚¦ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ)</strong></h3>






























<table class="border border-gray-400 w-full text-sm my-4 whitespace-pre-wrap table-fixed"><thead class="bg-cyan-100 text-black"><tr><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">ãƒ‡ãƒ¼ã‚¿é‡</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">ãƒ¡ãƒ¢ãƒª (MB)</th><th class="w-1/4 border border-gray-400 px-2 py-1 text-left font-medium whitespace-pre-wrap">Query (ç§’)</th></tr></thead><tbody><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">3ä¸‡ä»¶</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">512</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">11</td></tr><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap"></td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">2048</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">3.3</td></tr><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">10ä¸‡ä»¶</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">512</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">Out of memory Error</td></tr><tr><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap"></td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">2048</td><td class="w-1/4 border border-gray-300 px-2 py-1 whitespace-pre-wrap">10</td></tr></tbody></table>
<h3><strong>è€ƒå¯Ÿ</strong></h3>
<ul>
<li>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†æ•£ã«ã‚ˆã‚Šå–å¾—é€Ÿåº¦ãŒå‘ä¸Šã—ã¾ã—ãŸã€‚</li>
<li>ãƒ‡ãƒ¼ã‚¿é‡ãŒå¢—ãˆã‚‹ã¨Out of Memoryã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ã‚¯ã‚¨ãƒªæ–¹æ³•ã‚„ãƒ¡ãƒ¢ãƒªç®¡ç†ã®å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚</li>
</ul>
<hr/>
<h1><strong>ã¾ã¨ã‚</strong></h1>
<p>DynamoDBã§å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹éš›ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p>
<ol>
<li><strong>ãƒ‡ãƒ¼ã‚¿é‡ãŒå°‘ãªã„å ´åˆ</strong>: å˜ä¸€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§Queryã‚’ä½¿ç”¨ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</li>
<li><strong>ãƒ‡ãƒ¼ã‚¿é‡ãŒå¤šã„å ´åˆ</strong>: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’åˆ†æ•£ã—ã€ä¸¦åˆ—ã§Queryã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§åŠ¹ç‡çš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—å¯èƒ½ã§ã™ã€‚</li>
<li><strong>éåŒæœŸå‡¦ç†</strong>: ãƒ‡ãƒ¼ã‚¿é‡ãŒå¤šã„å ´åˆã¯åŒæœŸå‡¦ç†ã§ã¯ãªãã€éåŒæœŸã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹è¨­è¨ˆã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚</li>
<li><strong>ä»•æ§˜ã®å†æ¤œè¨</strong>: å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹ä»£ã‚ã‚Šã«ã€æ¡ä»¶ã‚’çµã‚Šè¾¼ã‚“ã§è¡¨ç¤ºã™ã‚‹ä»•æ§˜ã«å¤‰æ›´ã§ããªã„ã‹ã‚’ã¾ãšæ¤œè¨ã™ã‚‹ã¹ãã§ã—ã‚‡ã†ã€‚</li>
</ol>
<p>åŠ¹ç‡çš„ãªãƒ‡ãƒ¼ã‚¿å–å¾—ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆã®ãƒãƒ©ãƒ³ã‚¹ãŒæ¬ ã‹ã›ã¾ã›ã‚“ã€‚æœ¬è¨˜äº‹ã‚’å‚è€ƒã«ã€DynamoDBã‚’æ´»ç”¨ã—ãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ï¼</p>
<hr/><div class="text-center mt-8"><a class="inline-block bg-gray-800 text-white no-underline px-4 py-2 rounded hover:bg-gray-700" href="/">â† è¨˜äº‹ä¸€è¦§ã«æˆ»ã‚‹</a></div><div class="my-12 text-center"><p class="font-bold text-gray-800">åˆåŒä¼šç¤¾raisexã§ã¯ä¸€ç·’ã«åƒãä»²é–“ã‚’å‹Ÿé›†ä¸­ã§ã™ã€‚</p><p class="text-sm text-gray-600 mb-4">ã”èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ä»¥ä¸‹ã®æ¡ç”¨æƒ…å ±ã‚’ã”ç¢ºèªãã ã•ã„ã€‚</p><div class="flex justify-center"><div class="engage-recruit-widget" data-height="300" data-width="500" data-url="https://en-gage.net/raisex_jobs/widget/?banner=1"></div></div></div></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"id":258,"documentId":"o0cmjsrwp73fm9jd2i3s0d80","title":"DynamoDBã‹ã‚‰ã®å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã«ãŠã‘ã‚‹ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹","content":"å¼Šç¤¾ã¯ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®é–‹ç™ºã‚’å¾—æ„ã¨ã—ã¦ãŠã‚Šã€Amazon DynamoDBã‚„AWS Lambdaç­‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ãŸåŠ¹ç‡çš„ã§ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚\n\nãã®ä¸­ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã„ã¦ã€Œç”»é¢ã«å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹ã€ã¨ã„ã†ä»•æ§˜ã¯ã‚ˆãè¦‹ã‚‰ã‚Œã‚‹ã‚‚ã®ã®ã€NoSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã¯é©åˆ‡ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é¸ã°ãªã„ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚„ã‚³ã‚¹ãƒˆã®èª²é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚\n\næœ¬è¨˜äº‹ã§ã¯ã€DynamoDBã‹ã‚‰å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã¨ã€ãã®å®Ÿé¨“çµæœã‚’ã‚‚ã¨ã«ã—ãŸè¨­è¨ˆä¸Šã®æ³¨æ„ç‚¹ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚\n\n---\n\n# **å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã®èª²é¡Œ**\n\nDynamoDBã¯ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã«å„ªã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ãŒã€è¨­è¨ˆæ¬¡ç¬¬ã§å‡¦ç†æ€§èƒ½ãŒå¤§ããå¤‰åŒ–ã—ã¾ã™ã€‚\n\nç‰¹ã«ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ãŒå¿…è¦ã§ã™:\n\n- **Scanã®ãƒªã‚¹ã‚¯**:\nScanã¯ãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ã‚’ãƒ•ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹ãŸã‚ã€è†¨å¤§ãªãƒ‡ãƒ¼ã‚¿é‡ã®å ´åˆã«æ™‚é–“ãŒã‹ã‹ã‚Šã€ã‚³ã‚¹ãƒˆã‚‚å¢—åŠ ã—ã¾ã™ã€‚\n- **Queryã®å¯èƒ½æ€§**:\né©åˆ‡ã«è¨­è¨ˆã•ã‚ŒãŸãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ã¨ã‚½ãƒ¼ãƒˆã‚­ãƒ¼ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’åŠ¹ç‡çš„ã«å–å¾—ã§ãã¾ã™ã€‚\n\n---\n\n# **å®Ÿé¨“æ¦‚è¦**\n\nDynamoDBã§3ä¸‡ä»¶ã€10ä¸‡ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã—ã€Scanã¨Queryã®å‡¦ç†æ™‚é–“ã‚’æ¯”è¼ƒã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã®2ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚\n\n1. **å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å˜ä¸€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ã¾ã¨ã‚ã‚‹**\n2. **ãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«åˆ†æ•£ã•ã›ã‚‹**\n\nãƒ‡ãƒ¼ã‚¿ã¯AWSå…¬å¼ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒª [aws-samples/csv-to-dynamodb](https://github.com/aws-samples/csv-to-dynamodb) ã®testfile.csvã‚’ä½¿ç”¨ã€‚\n\nå®Ÿé¨“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã”ã¨ã«å°‘ã—ãƒ‡ãƒ¼ã‚¿ã‚’ä¿®æ­£ã—ã€æŠ•å…¥ã—ã¾ã™ã€‚\n\n---\n\n## **å®Ÿé¨“1: å˜ä¸€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ã¾ã¨ã‚ã‚‹**\n\n### **æ‰‹æ³•**\n\n- **ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼**: å›ºå®šå€¤ï¼ˆä¾‹: `DATA`ï¼‰ã‚’è¨­å®šã™ã‚‹GSIã‚’ä½œæˆã€‚\n- **ç›®çš„**: å˜ä¸€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ã€Queryã§åŠ¹ç‡çš„ã«å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã€‚\n\n**ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä¾‹:**\n\n| DataType (PK) | uuid | Country | ItemType |\n| --- | --- | --- | --- |\n| DATA | 535113847 | Azerbaijan | Snacks |\n| DATA | 874708545 | Panama | Cosmetics |\n\nQueryã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(AWS Lambdaç”¨)\n\n```python\nimport boto3\nfrom boto3.dynamodb.conditions import Key\n\ndef lambda_handler(event, context):\n    table_name = 'test_datas'\n    region = 'us-east-1'\n    gsi_name = 'DataType-index'\n\n    # DynamoDBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–\n    dynamodb = boto3.resource('dynamodb', region_name=region)\n    table = dynamodb.Table(table_name)\n\n    # ã‚¯ã‚¨ãƒªæ¡ä»¶ DataType ãŒ DATA\n    key_condition_expression = Key('DataType').eq('DATA')\n\n    try:\n        options = {\n            'IndexName': gsi_name,\n            'KeyConditionExpression': key_condition_expression,\n            'ReturnConsumedCapacity': 'TOTAL'\n        }\n        while True:\n            response = table.query(**options)\n            next_token = response.get('LastEvaluatedKey', None)\n            print(next_token)\n\n            if next_token:\n                options['ExclusiveStartKey'] = next_token\n            else:\n                break\n\n        return {\n            'statusCode': 200\n        }\n    except Exception as e:\n        print('ã‚¨ãƒ©ãƒ¼:', e)\n        return {\n            'statusCode': 500,\n            'body': 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'\n        }\n\n```\n\nScanã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(AWS Lambdaç”¨)\n\n```python\nimport boto3\n\ndef lambda_handler(event, context):\n    table_name = 'test_datas_'\n    region = 'us-east-1'\n\n    # DynamoDBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–\n    dynamodb = boto3.resource('dynamodb', region_name=region)\n    table = dynamodb.Table(table_name)\n\n    try:\n        options = {\n            'ReturnConsumedCapacity': 'TOTAL'\n        }\n        while True:\n            response = table.scan(**options)\n            next_token = response.get('LastEvaluatedKey', None)\n            print(next_token)\n\n            if next_token:\n                options['ExclusiveStartKey'] = next_token\n            else:\n                break\n\n        return {\n            'statusCode': 200\n        }\n    except Exception as e:\n        print('ã‚¨ãƒ©ãƒ¼:', e)\n        return {\n            'statusCode': 500,\n            'body': 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'\n        }\n\n```\n\n### **çµæœ(Lambdaã®ã‚¦ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ)**\n\n| ãƒ‡ãƒ¼ã‚¿é‡ | ãƒ¡ãƒ¢ãƒª (MB) | Query (ç§’) | Scan (ç§’) |\n| --- | --- | --- | --- |\n| 3ä¸‡ä»¶ | 512 | 15 | 15 |\n|  | 2048 | 4 | 5 |\n| 10ä¸‡ä»¶ | 512 | 50 | 50 |\n|  | 2048 | 13 | 15 |\n\n### **è€ƒå¯Ÿ**\n\n- å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ã„ã†è¦³ç‚¹ã§ã¯Scanã‚‚Queryã‚‚ã‚ã¾ã‚Šå‡¦ç†æ™‚é–“ã®é•ã„ã¯ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚\n- ãƒ‡ãƒ¼ã‚¿é‡ãŒå¢—ãˆã‚‹ã¨å–å¾—æ™‚é–“ãŒæ•°åç§’ã‹ã‹ã‚‹ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ‚ªåŒ–ãŒæ‡¸å¿µã•ã‚Œã¾ã™ã€‚\n- ãƒ¡ãƒ¢ãƒªã‚’å¢—ã‚„ã™ã“ã¨ã§å‡¦ç†æ™‚é–“ãŒçŸ­ç¸®ã•ã‚Œã¾ã™ãŒã€ãã‚Œã§ã‚‚æ•°ä¸‡ä»¶ä»¥ä¸Šã§ã¯éåŒæœŸå‡¦ç†ã‚„åˆ¥ã®å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚\n\n---\n\n## **å®Ÿé¨“2: ãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«åˆ†æ•£ã™ã‚‹**\n\n### **æ‰‹æ³•**\n\n- **ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚­ãƒ¼**: ã‚·ãƒ£ãƒ¼ãƒ‰ç•ªå·ã‚„ãƒ©ãƒ³ãƒ€ãƒ è­˜åˆ¥å­ã‚’ä»˜åŠ ã€‚\n- **ç›®çš„**: ãƒ‡ãƒ¼ã‚¿ã‚’è¤‡æ•°ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã«åˆ†æ•£ã—ã€ä¸¦åˆ—å‡¦ç†ã§å–å¾—é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚\n\n**ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä¾‹:**\n\n| ItemCategory (PK) | uuid | DataType | Country | ItemType |\n| --- | --- | --- | --- | --- |\n| ItemCategory#11 | 535113847 | DATA | Azerbaijan | Snacks |\n| ItemCategory#5 | 874708545 | DATA | Panama | Cosmetics |\n\nä¸¦åˆ—ã§ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã™ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(AWS Lambdaç”¨)\n\n```python\nimport boto3\nimport os\nfrom botocore.config import Config\nfrom concurrent.futures import ThreadPoolExecutor, as_completed\n\n# DynamoDB ãƒ†ãƒ¼ãƒ–ãƒ«å\nTABLE_NAME = \"test_datas\"\nSHARD_COUNT = 12  # ã‚·ãƒ£ãƒ¼ãƒ‰ã®æ•°\n\ncustom_config = Config(\n    max_pool_connections=12\n)\n# DynamoDB ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ä½œæˆ\ndynamodb = boto3.client('dynamodb', config=custom_config)\n\n# æœ€å¤§ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°\nmax_workers = min(32, os.cpu_count() * 5)\n\ndef query_shard(partition_key):\n    \"\"\"æŒ‡å®šã•ã‚ŒãŸã‚·ãƒ£ãƒ¼ãƒ‰ã‚’ã‚¯ã‚¨ãƒªã™ã‚‹é–¢æ•°\"\"\"\n    try:\n        items = []\n        options = {\n            'TableName': TABLE_NAME,\n            'IndexName': 'ItemCategory-index',\n            'KeyConditionExpression': \"ItemCategory = :pk\",\n            'ExpressionAttributeValues': {\":pk\": {\"S\": partition_key}}\n        }\n        while True:\n            response = dynamodb.query(**options)\n            items.extend(response.get(\"Items\", []))\n            next_token = response.get('LastEvaluatedKey', None)\n            if next_token:\n                options['ExclusiveStartKey'] = next_token\n            else:\n                break\n        print(f\"{partition_key}: {len(items)}ä»¶\")\n        return items\n    except Exception as e:\n        print(f\"Error querying {partition_key}: {e}\")\n        return []\n\ndef query_all_shards():\n    \"\"\"ã™ã¹ã¦ã®ã‚·ãƒ£ãƒ¼ãƒ‰ã‚’ä¸¦åˆ—ã§ã‚¯ã‚¨ãƒªã™ã‚‹\"\"\"\n    print(f'max_workers: {max_workers}')\n    with ThreadPoolExecutor(max_workers=max_workers) as executor:\n        # ã‚·ãƒ£ãƒ¼ãƒ‰ã”ã¨ã«ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œ\n        futures = {\n            executor.submit(query_shard, f\"ItemCategory#{shard_number}\"): shard_number\n            for shard_number in range(1, SHARD_COUNT + 1)\n        }\n        \n        # çµæœã‚’é›†ç´„\n        results = []\n        for future in as_completed(futures):\n            try:\n                shard_result = future.result()\n                results.extend(shard_result)\n            except Exception as e:\n                print(f\"Error in shard {futures[future]}: {e}\")\n        \n        return results\n\ndef lambda_handler(event, context):\n    \"\"\"Lambda é–¢æ•°ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ\"\"\"\n    results = query_all_shards()\n    print(f'{len(results)}ä»¶')\n    return {\n        \"statusCode\": 200,\n        \"body\": {\n        }\n    }\n```\n\n### **çµæœ(Lambdaã®ã‚¦ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ)**\n\n| ãƒ‡ãƒ¼ã‚¿é‡ | ãƒ¡ãƒ¢ãƒª (MB) | Query (ç§’) |\n| --- | --- | --- |\n| 3ä¸‡ä»¶ | 512 | 11 |\n|  | 2048 | 3.3 |\n| 10ä¸‡ä»¶ | 512 | Out of memory Error |\n|  | 2048 | 10 |\n\n### **è€ƒå¯Ÿ**\n\n- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†æ•£ã«ã‚ˆã‚Šå–å¾—é€Ÿåº¦ãŒå‘ä¸Šã—ã¾ã—ãŸã€‚\n- ãƒ‡ãƒ¼ã‚¿é‡ãŒå¢—ãˆã‚‹ã¨Out of Memoryã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ã‚¯ã‚¨ãƒªæ–¹æ³•ã‚„ãƒ¡ãƒ¢ãƒªç®¡ç†ã®å·¥å¤«ãŒå¿…è¦ã§ã™ã€‚\n\n---\n\n# **ã¾ã¨ã‚**\n\nDynamoDBã§å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹éš›ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚\n\n1. **ãƒ‡ãƒ¼ã‚¿é‡ãŒå°‘ãªã„å ´åˆ**: å˜ä¸€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§Queryã‚’ä½¿ç”¨ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚\n2. **ãƒ‡ãƒ¼ã‚¿é‡ãŒå¤šã„å ´åˆ**: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’åˆ†æ•£ã—ã€ä¸¦åˆ—ã§Queryã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§åŠ¹ç‡çš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—å¯èƒ½ã§ã™ã€‚\n3. **éåŒæœŸå‡¦ç†**: ãƒ‡ãƒ¼ã‚¿é‡ãŒå¤šã„å ´åˆã¯åŒæœŸå‡¦ç†ã§ã¯ãªãã€éåŒæœŸã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹è¨­è¨ˆã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚\n4. **ä»•æ§˜ã®å†æ¤œè¨**: å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹ä»£ã‚ã‚Šã«ã€æ¡ä»¶ã‚’çµã‚Šè¾¼ã‚“ã§è¡¨ç¤ºã™ã‚‹ä»•æ§˜ã«å¤‰æ›´ã§ããªã„ã‹ã‚’ã¾ãšæ¤œè¨ã™ã‚‹ã¹ãã§ã—ã‚‡ã†ã€‚\n\nåŠ¹ç‡çš„ãªãƒ‡ãƒ¼ã‚¿å–å¾—ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆã®ãƒãƒ©ãƒ³ã‚¹ãŒæ¬ ã‹ã›ã¾ã›ã‚“ã€‚æœ¬è¨˜äº‹ã‚’å‚è€ƒã«ã€DynamoDBã‚’æ´»ç”¨ã—ãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ï¼\n\n---\n\n","createdAt":"2025-05-19T08:50:57.627Z","updatedAt":"2025-06-05T23:54:33.227Z","publishedAt":"2025-06-05T23:54:33.240Z","docId":"hmwidddh8kfenx2ifd67lygc","tags":[{"id":10,"documentId":"cxt2tbnsy05cazm17p3pp1a3","createdAt":"2025-05-19T09:46:58.860Z","updatedAt":"2025-05-19T09:46:58.860Z","publishedAt":"2025-05-19T09:46:58.868Z","name":"AWS"},{"id":12,"documentId":"c3lesvkdvjiq7y5zfx9mx0tu","createdAt":"2025-05-19T09:47:14.973Z","updatedAt":"2025-05-19T09:47:14.973Z","publishedAt":"2025-05-19T09:47:14.980Z","name":"Backend"}],"thumbnail":[{"id":14,"documentId":"hu10hoivv38q6d2d58e0uyhu","name":"20250513-10.png","alternativeText":null,"caption":null,"width":1504,"height":844,"formats":{"thumbnail":{"name":"thumbnail_20250513-10.png","hash":"thumbnail_20250513_10_4b5734cef6","ext":".png","mime":"image/png","path":null,"width":245,"height":137,"size":13.91,"sizeInBytes":13908,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/thumbnail_20250513_10_4b5734cef6.png"},"medium":{"name":"medium_20250513-10.png","hash":"medium_20250513_10_4b5734cef6","ext":".png","mime":"image/png","path":null,"width":750,"height":421,"size":54.78,"sizeInBytes":54781,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/medium_20250513_10_4b5734cef6.png"},"small":{"name":"small_20250513-10.png","hash":"small_20250513_10_4b5734cef6","ext":".png","mime":"image/png","path":null,"width":500,"height":281,"size":33.51,"sizeInBytes":33508,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/small_20250513_10_4b5734cef6.png"},"large":{"name":"large_20250513-10.png","hash":"large_20250513_10_4b5734cef6","ext":".png","mime":"image/png","path":null,"width":1000,"height":561,"size":78.42,"sizeInBytes":78418,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/large_20250513_10_4b5734cef6.png"}},"hash":"20250513_10_4b5734cef6","ext":".png","mime":"image/png","size":22.83,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/20250513_10_4b5734cef6.png","previewUrl":null,"provider":"@strapi/provider-upload-aws-s3","provider_metadata":null,"createdAt":"2025-05-20T07:44:41.591Z","updatedAt":"2025-05-20T07:44:41.591Z","publishedAt":"2025-05-20T07:44:41.594Z"}]}},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"o0cmjsrwp73fm9jd2i3s0d80"},"buildId":"wdcbjCbp8DYGqTQVAi4UF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>