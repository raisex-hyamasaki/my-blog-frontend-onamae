<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="最新の技術トレンド、プログラミング、ソフトウェア開発、ツールのレビュー、プロジェクト管理等についての考察をお届け"/><meta property="og:url" content="https://blog.raisex.jp/articles/y39dt5uhrmpjlphirb3u5vhb"/><meta property="og:title" content="レイズクロスTechBlog | さいたま市大宮区システム会社raisex運営"/><meta property="og:description" content="最新の技術トレンド、プログラミング、ソフトウェア開発、ツールのレビュー、プロジェクト管理等についての考察をお届け"/><meta property="og:image" content="https://blog.raisex.jphttps://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/medium_20250513_23_99f792de40.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><title>Docker Compose超入門 初心者でもすぐに使える基礎ガイド<!-- --> | レイズクロス Tech Blog</title><meta name="next-head-count" content="11"/><link rel="preload" href="/_next/static/css/7d757bdfdfb985a7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7d757bdfdfb985a7.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-2c547fd4592db0a6.js" defer=""></script><script src="/_next/static/chunks/framework-e952fed463eb8e34.js" defer=""></script><script src="/_next/static/chunks/main-72cf801a60c05482.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b6737859a806843a.js" defer=""></script><script src="/_next/static/chunks/a2bf56a3-f921f321ae1e0e8d.js" defer=""></script><script src="/_next/static/chunks/61-43a5fb199f2ef164.js" defer=""></script><script src="/_next/static/chunks/257-c12ad0b16790f4c5.js" defer=""></script><script src="/_next/static/chunks/pages/articles/%5Bid%5D-c5730984a51dce88.js" defer=""></script><script src="/_next/static/QFbkZlg1wljFeRkEGmC7O/_buildManifest.js" defer=""></script><script src="/_next/static/QFbkZlg1wljFeRkEGmC7O/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="max-w-[1024px] mx-auto px-4"><header class="sticky top-0 z-20 bg-white border-b border-gray-200 h-12 flex items-center justify-between px-4"><a class="text-blue-600 no-underline hover:text-gray-600 text-lg font-bold" href="/">📋 レイズクロス Tech Blog</a><div class="flex gap-3"><a href="https://twitter.com/share" target="_blank" rel="noopener noreferrer"><img src="/icons/x.svg" alt="Share on X" class="h-7 w-7"/></a><a href="https://www.facebook.com/sharer/sharer.php" target="_blank" rel="noopener noreferrer"><img src="/icons/facebook.svg" alt="Share on Facebook" class="h-7 w-7"/></a><a href="https://social-plugins.line.me/lineit/share" target="_blank" rel="noopener noreferrer"><img src="/icons/line.svg" alt="Share on LINE" class="h-7 w-7"/></a></div></header><article class="prose prose-slate max-w-none pt-6"><h1 class="text-3xl font-bold border-b pb-2">Docker Compose超入門 初心者でもすぐに使える基礎ガイド</h1><div class="text-sm text-gray-500 mb-4">投稿更新日: <!-- -->2025/6/6 9:01:42</div><div class="flex flex-wrap gap-2 mb-4"><span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full">#<!-- -->Docker</span></div><div class="w-full flex justify-center mb-6"><img src="https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/medium_20250513_23_99f792de40.png" alt="サムネイル" class="w-full max-w-[800px] h-auto rounded"/></div><p>Dockerを使うとアプリの環境を簡単に構築出来ますが、複数のコンテナを扱う場合、コマンドが増えて面倒になることがあります。そんなときに役立つのが <strong>Docker Compose</strong> です！</p>
<p>本記事では、Docker Composeの基本から、よく使うコマンド、実際にNginxとExpress.jsを組み合わせたアプリの作成まで、ステップバイステップで解説します。</p>
<hr/>
<h2>1. 事前準備：DockerとDocker Composeのインストール</h2>
<p>Docker Composeを使用するには、まず <strong>Docker Desktop</strong> をインストールする必要があります。</p>
<h3><strong>Dockerのインストール</strong></h3>
<p>公式サイトからDockerをインストールします。</p>
<p>🔗 <a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener noreferrer" class="text-blue-600 underline">Docker公式サイト</a></p>
<hr/>
<h2>2. <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker-compose.yml</code> を作成してみよう</h2>
<p>まずは簡単な <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker-compose.yml</code> を作成し、コンテナを管理する方法を学びましょう。</p>
<h3><strong>1つのサービスを定義</strong></h3>
<p>以下のYAMLファイルを作成し、nginxのWebサーバーを動かしてみます。</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-yaml" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token key" style="color:hsl(29, 54%, 61%)">version</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;3&#x27;</span><span>
</span>
<span></span><span class="token key" style="color:hsl(29, 54%, 61%)">services</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>  </span><span class="token key" style="color:hsl(29, 54%, 61%)">web</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>    </span><span class="token key" style="color:hsl(29, 54%, 61%)">image</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> nginx
</span><span>    </span><span class="token key" style="color:hsl(29, 54%, 61%)">ports</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>      </span><span class="token" style="color:hsl(220, 14%, 71%)">-</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;80:80&quot;</span><span>
</span></code></pre></div></pre>
<p>この例では <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">web</code> がサービス名になります。</p>
<h3><strong>起動</strong></h3>
<p>作成したファイルがあるディレクトリで、以下のコマンドを実行します。</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker-compose</span><span> up -d</span></code></pre></div></pre>
<ul>
<li><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">-d</code> はバックグラウンド実行のオプション</li>
<li>ブラウザで <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">http://localhost</code> にアクセスすると、Nginxのデフォルトページが表示されます。</li>
</ul>
<h3><strong>終了</strong></h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker-compose</span><span> down</span></code></pre></div></pre>
<p>これでコンテナは停止・削除されます。</p>
<hr/>
<h2>3. Docker Composeのよく使うコマンド</h2>
<p>Docker Composeを使うと、複数のコンテナを一括で管理できます。ここでは、よく使うコマンドを順番に紹介します。</p>
<h3>① コンテナを起動</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose up</span></code></pre></div></pre>
<p><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker compose up</code> を実行すると、<code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker-compose.yml</code> に記載されたサービス（コンテナ）が起動します。</p>
<h3>② バックグラウンドで起動</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose up -d</span></code></pre></div></pre>
<ul>
<li><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">-d</code> をつけるとバックグラウンドで起動し、ターミナルを占有しません。</li>
</ul>
<h3>③ 特定のサービスのみ起動</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose up サービス名</span></code></pre></div></pre>
<p><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker-compose.yml</code> に定義されている特定のサービスだけを起動したい場合は、サービス名を指定します。</p>
<h3>④ コンテナを停止＆削除</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose down</span></code></pre></div></pre>
<p>起動したコンテナを停止し、削除します。ネットワークも削除されるため、完全にクリーンな状態に戻したいときに便利です。</p>
<h3>⑤ コンテナを停止</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose stop</span></code></pre></div></pre>
<p>実行中のコンテナを停止します。ただし、コンテナ自体は削除されないため、後で <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker compose start</code> で再開できます。</p>
<h3>⑥ 停止したコンテナを再開</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose start</span></code></pre></div></pre>
<p><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker compose stop</code> で停止したコンテナを再び起動します。</p>
<h3>⑦ コンテナを再起動</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose restart</span></code></pre></div></pre>
<p>コンテナを再起動したいときに使います。設定を変更した場合などに便利です。</p>
<h3>⑧ 実行中のコンテナを確認</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose </span><span class="token" style="color:hsl(207, 82%, 66%)">ps</span></code></pre></div></pre>
<p>現在動作しているコンテナの状態を一覧表示します。</p>
<h3>⑨ コンテナのログを表示</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose logs</span></code></pre></div></pre>
<p>コンテナの標準出力（ログ）を確認できます。</p>
<p>リアルタイムでログを追いたい場合は <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">-f</code> をつけます。</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose logs -f</span></code></pre></div></pre>
<h3>⑩ 特定のサービスのコンテナを削除</h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker</span><span> compose </span><span class="token" style="color:hsl(207, 82%, 66%)">rm</span><span> -fsv サービス名</span></code></pre></div></pre>
<p>特定のサービスのみを削除するときに使用します。</p>
<p>オプションの意味：</p>
<ul>
<li><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">-f</code> 強制削除</li>
<li><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">-s</code> ボリュームも削除</li>
<li><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">-v</code> 名前付きボリュームも削除</li>
</ul>
<p>これらのコマンドを覚えておけば、Docker Composeをスムーズに扱えるようになります！</p>
<hr/>
<h2>4. NginxとExpress.jsを組み合わせたアプリを作成</h2>
<p>ここからは、カスタムの <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">Dockerfile</code> と <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker-compose.yml</code> を作成し、 <strong>NginxとExpress.jsを使ったHello Worldアプリ</strong> を実装します。</p>
<h3><strong>ディレクトリ構成</strong></h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>myapp/
</span>│── docker-compose.yml
<!-- -->│── nginx/
<!-- -->│   └── default.conf
<!-- -->└── app/
<!-- -->    ├── Dockerfile
<!-- -->    ├── package.json
<!-- -->    ├── server.js</code></pre></div></pre>
<h3><strong>1. Express.jsの準備</strong></h3>
<p>まず、<code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">app/</code> ディレクトリを作成し、その中に <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">package.json</code> を用意します。</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-json" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>  </span><span class="token" style="color:hsl(355, 65%, 65%)">&quot;name&quot;</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;docker-express&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>  </span><span class="token" style="color:hsl(355, 65%, 65%)">&quot;version&quot;</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;1.0.0&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>  </span><span class="token" style="color:hsl(355, 65%, 65%)">&quot;main&quot;</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;server.js&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span><span>  </span><span class="token" style="color:hsl(355, 65%, 65%)">&quot;dependencies&quot;</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>    </span><span class="token" style="color:hsl(355, 65%, 65%)">&quot;express&quot;</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;^4.17.1&quot;</span><span>
</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></code></pre></div></pre>
<p>次に、<code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">server.js</code> を作成します。</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-jsx" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> express </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">require</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;express&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> app </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">express</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span>
<span>app</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">get</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;/&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token parameter">req</span><span class="token parameter" style="color:hsl(220, 14%, 71%)">,</span><span class="token parameter"> res</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token arrow" style="color:hsl(207, 82%, 66%)">=&gt;</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>  res</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">send</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;Hello, World from Express.js!&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span>
<span>app</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">listen</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(29, 54%, 61%)">3000</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token arrow" style="color:hsl(207, 82%, 66%)">=&gt;</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span><span>  </span><span class="token console" style="color:hsl(29, 54%, 61%)">console</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">log</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;Server is running on port 3000&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></code></pre></div></pre>
<h3><strong>2. Express.jsのDockerfile</strong></h3>
<p>次に、<code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">app/</code> ディレクトリ内に <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">Dockerfile</code> を作成します。</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-docker" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token instruction" style="color:hsl(286, 60%, 67%)">FROM</span><span class="token instruction"> node:14</span><span>
</span><span></span><span class="token instruction" style="color:hsl(286, 60%, 67%)">WORKDIR</span><span class="token instruction"> /app</span><span>
</span><span></span><span class="token instruction" style="color:hsl(286, 60%, 67%)">COPY</span><span class="token instruction"> package.json ./</span><span>
</span><span></span><span class="token instruction" style="color:hsl(286, 60%, 67%)">RUN</span><span class="token instruction"> npm install</span><span>
</span><span></span><span class="token instruction" style="color:hsl(286, 60%, 67%)">COPY</span><span class="token instruction"> . .</span><span>
</span><span></span><span class="token instruction" style="color:hsl(286, 60%, 67%)">CMD</span><span class="token instruction"> [</span><span class="token instruction" style="color:hsl(95, 38%, 62%)">&quot;node&quot;</span><span class="token instruction">, </span><span class="token instruction" style="color:hsl(95, 38%, 62%)">&quot;server.js&quot;</span><span class="token instruction">]</span><span>
</span><span></span><span class="token instruction" style="color:hsl(286, 60%, 67%)">EXPOSE</span><span class="token instruction"> 3000</span><span>
</span></code></pre></div></pre>
<h3><strong>3. Nginxの設定</strong></h3>
<p>Nginxをリバースプロキシとして動作させます。<code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">nginx/</code> ディレクトリを作成し、<code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">default.conf</code> を追加します。</p>
<pre><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">server {
    listen 80;

    location / {
        proxy_pass http://app:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
</code></pre>
<h3><strong>4. <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker-compose.yml</code> を作成</strong></h3>
<p>最後に <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker-compose.yml</code> をルートディレクトリに作成します。</p>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-yaml" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token key" style="color:hsl(29, 54%, 61%)">version</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&#x27;3&#x27;</span><span>
</span>
<span></span><span class="token key" style="color:hsl(29, 54%, 61%)">services</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>  </span><span class="token key" style="color:hsl(29, 54%, 61%)">app</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>    </span><span class="token key" style="color:hsl(29, 54%, 61%)">build</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> ./app
</span><span>    </span><span class="token key" style="color:hsl(29, 54%, 61%)">ports</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>      </span><span class="token" style="color:hsl(220, 14%, 71%)">-</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;3000:3000&quot;</span><span>
</span>
<span>  </span><span class="token key" style="color:hsl(29, 54%, 61%)">web</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>    </span><span class="token key" style="color:hsl(29, 54%, 61%)">image</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> nginx
</span><span>    </span><span class="token key" style="color:hsl(29, 54%, 61%)">ports</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>      </span><span class="token" style="color:hsl(220, 14%, 71%)">-</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;80:80&quot;</span><span>
</span><span>    </span><span class="token key" style="color:hsl(29, 54%, 61%)">volumes</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>      </span><span class="token" style="color:hsl(220, 14%, 71%)">-</span><span> ./nginx/default.conf</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>/etc/nginx/conf.d/default.conf
</span><span>    </span><span class="token key" style="color:hsl(29, 54%, 61%)">depends_on</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span><span>      </span><span class="token" style="color:hsl(220, 14%, 71%)">-</span><span> app
</span></code></pre></div></pre>
<h3><strong>5. コンテナの起動</strong></h3>
<pre><div class="relative my-4"><button class="absolute top-2 right-2 text-xs bg-gray-700 text-white px-2 py-1 rounded hover:bg-gray-600">Copy</button><pre style="background:transparent;color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-word;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:0.75rem;margin:0;overflow:auto;border-radius:0.5rem;overflow-x:auto"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">docker-compose</span><span> up -d</span></code></pre></div></pre>
<ul>
<li><code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">http://localhost</code> にアクセスすると <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">Hello, World from Express.js!</code> が表示されます。</li>
</ul>
<hr/>
<h2>まとめ</h2>
<p>今回は <strong>Docker Composeの基本</strong> から <strong>Nginx + Express.jsのWebアプリ</strong> を作るところまで解説しました。</p>
<h3><strong>学んだポイント</strong></h3>
<p>✅ Docker Composeの基本的なコマンド</p>
<p>✅ <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">docker-compose.yml</code> の書き方</p>
<p>✅ カスタム <code class="bg-yellow-200 font-mono px-[0.3rem] py-[0.1rem] rounded whitespace-nowrap text-inherit">Dockerfile</code> の作成</p>
<p>✅ NginxとExpress.jsの連携</p>
<p>Docker Composeを使えば、 <strong>複数のコンテナを簡単に管理できる</strong> ようになります。ぜひ試してみてくださいね。 🚀</p>
<hr/><div class="text-center mt-8"><a class="inline-block bg-gray-800 text-white no-underline px-4 py-2 rounded hover:bg-gray-700" href="/">← 記事一覧に戻る</a></div><div class="my-12 text-center"><p class="font-bold text-gray-800">合同会社raisexでは一緒に働く仲間を募集中です。</p><p class="text-sm text-gray-600 mb-4">ご興味のある方は以下の採用情報をご確認ください。</p><div class="flex justify-center"><div class="engage-recruit-widget" data-height="300" data-width="500" data-url="https://en-gage.net/raisex_jobs/widget/?banner=1"></div></div></div></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"id":270,"documentId":"y39dt5uhrmpjlphirb3u5vhb","title":"Docker Compose超入門 初心者でもすぐに使える基礎ガイド","content":"Dockerを使うとアプリの環境を簡単に構築出来ますが、複数のコンテナを扱う場合、コマンドが増えて面倒になることがあります。そんなときに役立つのが **Docker Compose** です！\n\n本記事では、Docker Composeの基本から、よく使うコマンド、実際にNginxとExpress.jsを組み合わせたアプリの作成まで、ステップバイステップで解説します。\n\n---\n\n## 1. 事前準備：DockerとDocker Composeのインストール\n\nDocker Composeを使用するには、まず **Docker Desktop** をインストールする必要があります。\n\n### **Dockerのインストール**\n\n公式サイトからDockerをインストールします。\n\n🔗 [Docker公式サイト](https://www.docker.com/products/docker-desktop/)\n\n---\n\n## 2. `docker-compose.yml` を作成してみよう\n\nまずは簡単な `docker-compose.yml` を作成し、コンテナを管理する方法を学びましょう。\n\n### **1つのサービスを定義**\n\n以下のYAMLファイルを作成し、nginxのWebサーバーを動かしてみます。\n\n```yaml\nversion: '3'\n\nservices:\n  web:\n    image: nginx\n    ports:\n      - \"80:80\"\n\n```\n\nこの例では `web` がサービス名になります。\n\n### **起動**\n\n作成したファイルがあるディレクトリで、以下のコマンドを実行します。\n\n```bash\ndocker-compose up -d\n```\n\n- `-d` はバックグラウンド実行のオプション\n- ブラウザで `http://localhost` にアクセスすると、Nginxのデフォルトページが表示されます。\n\n### **終了**\n\n```bash\ndocker-compose down\n```\n\nこれでコンテナは停止・削除されます。\n\n---\n\n## 3. Docker Composeのよく使うコマンド\n\nDocker Composeを使うと、複数のコンテナを一括で管理できます。ここでは、よく使うコマンドを順番に紹介します。\n\n### ① コンテナを起動\n\n```bash\ndocker compose up\n```\n\n`docker compose up` を実行すると、`docker-compose.yml` に記載されたサービス（コンテナ）が起動します。\n\n### ② バックグラウンドで起動\n\n```bash\ndocker compose up -d\n```\n\n- `-d` をつけるとバックグラウンドで起動し、ターミナルを占有しません。\n\n### ③ 特定のサービスのみ起動\n\n```bash\ndocker compose up サービス名\n```\n\n`docker-compose.yml` に定義されている特定のサービスだけを起動したい場合は、サービス名を指定します。\n\n### ④ コンテナを停止＆削除\n\n```bash\ndocker compose down\n```\n\n起動したコンテナを停止し、削除します。ネットワークも削除されるため、完全にクリーンな状態に戻したいときに便利です。\n\n### ⑤ コンテナを停止\n\n```bash\ndocker compose stop\n```\n\n実行中のコンテナを停止します。ただし、コンテナ自体は削除されないため、後で `docker compose start` で再開できます。\n\n### ⑥ 停止したコンテナを再開\n\n```bash\ndocker compose start\n```\n\n`docker compose stop` で停止したコンテナを再び起動します。\n\n### ⑦ コンテナを再起動\n\n```bash\ndocker compose restart\n```\n\nコンテナを再起動したいときに使います。設定を変更した場合などに便利です。\n\n### ⑧ 実行中のコンテナを確認\n\n```bash\ndocker compose ps\n```\n\n現在動作しているコンテナの状態を一覧表示します。\n\n### ⑨ コンテナのログを表示\n\n```bash\ndocker compose logs\n```\n\nコンテナの標準出力（ログ）を確認できます。\n\nリアルタイムでログを追いたい場合は `-f` をつけます。\n\n```bash\ndocker compose logs -f\n```\n\n### ⑩ 特定のサービスのコンテナを削除\n\n```bash\ndocker compose rm -fsv サービス名\n```\n\n特定のサービスのみを削除するときに使用します。\n\nオプションの意味：\n\n- `-f` 強制削除\n- `-s` ボリュームも削除\n- `-v` 名前付きボリュームも削除\n\nこれらのコマンドを覚えておけば、Docker Composeをスムーズに扱えるようになります！\n\n---\n\n## 4. NginxとExpress.jsを組み合わせたアプリを作成\n\nここからは、カスタムの `Dockerfile` と `docker-compose.yml` を作成し、 **NginxとExpress.jsを使ったHello Worldアプリ** を実装します。\n\n### **ディレクトリ構成**\n\n```bash\nmyapp/\n│── docker-compose.yml\n│── nginx/\n│   └── default.conf\n└── app/\n    ├── Dockerfile\n    ├── package.json\n    ├── server.js\n```\n\n### **1. Express.jsの準備**\n\nまず、`app/` ディレクトリを作成し、その中に `package.json` を用意します。\n\n```json\n{\n  \"name\": \"docker-express\",\n  \"version\": \"1.0.0\",\n  \"main\": \"server.js\",\n  \"dependencies\": {\n    \"express\": \"^4.17.1\"\n  }\n}\n\n```\n\n次に、`server.js` を作成します。\n\n```jsx\nconst express = require('express');\nconst app = express();\n\napp.get('/', (req, res) =\u003e {\n  res.send('Hello, World from Express.js!');\n});\n\napp.listen(3000, () =\u003e {\n  console.log('Server is running on port 3000');\n});\n\n```\n\n### **2. Express.jsのDockerfile**\n\n次に、`app/` ディレクトリ内に `Dockerfile` を作成します。\n\n```docker\nFROM node:14\nWORKDIR /app\nCOPY package.json ./\nRUN npm install\nCOPY . .\nCMD [\"node\", \"server.js\"]\nEXPOSE 3000\n\n```\n\n### **3. Nginxの設定**\n\nNginxをリバースプロキシとして動作させます。`nginx/` ディレクトリを作成し、`default.conf` を追加します。\n\n```\nserver {\n    listen 80;\n\n    location / {\n        proxy_pass http://app:3000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n    }\n}\n```\n\n### **4. `docker-compose.yml` を作成**\n\n最後に `docker-compose.yml` をルートディレクトリに作成します。\n\n```yaml\nversion: '3'\n\nservices:\n  app:\n    build: ./app\n    ports:\n      - \"3000:3000\"\n\n  web:\n    image: nginx\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf\n    depends_on:\n      - app\n\n```\n\n### **5. コンテナの起動**\n\n```bash\ndocker-compose up -d\n```\n\n- `http://localhost` にアクセスすると `Hello, World from Express.js!` が表示されます。\n\n---\n\n## まとめ\n\n今回は **Docker Composeの基本** から **Nginx + Express.jsのWebアプリ** を作るところまで解説しました。\n\n### **学んだポイント**\n\n✅ Docker Composeの基本的なコマンド\n\n✅ `docker-compose.yml` の書き方\n\n✅ カスタム `Dockerfile` の作成\n\n✅ NginxとExpress.jsの連携\n\nDocker Composeを使えば、 **複数のコンテナを簡単に管理できる** ようになります。ぜひ試してみてくださいね。 🚀\n\n---\n","createdAt":"2025-05-19T08:50:58.441Z","updatedAt":"2025-06-06T00:01:42.686Z","publishedAt":"2025-06-06T00:01:42.698Z","docId":"y20328g93lc4hx15m7vjn3y4","tags":[{"id":2,"documentId":"zigqvzb0flgfexglvu0rhcai","createdAt":"2025-05-19T09:42:02.161Z","updatedAt":"2025-05-19T09:42:02.161Z","publishedAt":"2025-05-19T09:42:02.189Z","name":"Docker"}],"thumbnail":[{"id":27,"documentId":"w4z64z3qufa17y4cdia6jgyl","name":"20250513-23.png","alternativeText":null,"caption":null,"width":1503,"height":844,"formats":{"thumbnail":{"name":"thumbnail_20250513-23.png","hash":"thumbnail_20250513_23_99f792de40","ext":".png","mime":"image/png","path":null,"width":245,"height":138,"size":16.1,"sizeInBytes":16098,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/thumbnail_20250513_23_99f792de40.png"},"small":{"name":"small_20250513-23.png","hash":"small_20250513_23_99f792de40","ext":".png","mime":"image/png","path":null,"width":500,"height":281,"size":40.24,"sizeInBytes":40241,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/small_20250513_23_99f792de40.png"},"large":{"name":"large_20250513-23.png","hash":"large_20250513_23_99f792de40","ext":".png","mime":"image/png","path":null,"width":1000,"height":562,"size":92.78,"sizeInBytes":92775,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/large_20250513_23_99f792de40.png"},"medium":{"name":"medium_20250513-23.png","hash":"medium_20250513_23_99f792de40","ext":".png","mime":"image/png","path":null,"width":750,"height":421,"size":66.8,"sizeInBytes":66801,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/medium_20250513_23_99f792de40.png"}},"hash":"20250513_23_99f792de40","ext":".png","mime":"image/png","size":24.66,"url":"https://stg-raisex-tech-blog.s3.ap-northeast-1.amazonaws.com/20250513_23_99f792de40.png","previewUrl":null,"provider":"@strapi/provider-upload-aws-s3","provider_metadata":null,"createdAt":"2025-05-20T07:54:09.951Z","updatedAt":"2025-05-20T07:54:09.951Z","publishedAt":"2025-05-20T07:54:09.952Z"}]}},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"y39dt5uhrmpjlphirb3u5vhb"},"buildId":"QFbkZlg1wljFeRkEGmC7O","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>